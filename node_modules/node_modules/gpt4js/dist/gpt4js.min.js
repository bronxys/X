(()=>{"use strict";const e=class{async chatCompletion(e,t){throw new Error("Method 'chatCompletion()' must be implemented.")}},t=function(e){return{accept:"application/json, text/event-stream","accept-language":"ru,en;q=0.9","content-type":"application/json",priority:"u=1, i","sec-ch-ua":'"Chromium";v="124", "YaBrowser";v="24.6", "Not-A.Brand";v="99", "Yowser";v="2.5"',"sec-ch-ua-mobile":"?0","sec-ch-ua-platform":'"Windows"',plugins:"0","sec-fetch-dest":"empty","sec-fetch-mode":"cors","sec-fetch-site":"same-origin","x-requested-with":"XMLHttpRequest",Referer:e,"Referrer-Policy":"strict-origin-when-cross-origin"}},r=async function(e,t){if(!e.ok)throw new Error(`HTTP error! Status: ${e.status}`);const r=e.body.getReader(),a=new TextDecoder("utf-8"),o=[],s=new Set;for(;;){const{done:e,value:n}=await r.read();if(e)break;o.push(a.decode(n,{stream:!0}));let c=o.join("");o.length=0,c.split("\n").forEach((e=>{if(""!==(e=e.replace(/^data: /,"")).trim()&&!s.has(e)){if(s.add(e),"[DONE]"===e.trim())return;try{let r=JSON.parse(e);t(r.choices[0].delta.content)}catch(e){console.error("Error parsing chunk:",e)}}}))}return""},a=class extends e{async chatCompletion(e,a,o){try{const s=await fetch("https://nexra.aryahcr.cc/api/chat/gpt",{method:"POST",headers:t("https://nexra.aryahcr.cc/api/chat/gpt"),body:JSON.stringify({messages:e,model:a.model||"gpt-4",temperature:a.temperature||.5,stream:a.stream||!1})});if(!s.ok)throw new Error(`HTTP error! status: ${s.status}`);if(!a.stream){const e=await s.json();if(e.status&&e.gpt)return e.gpt;throw new Error("Unexpected response format")}await r(s,o)}catch(e){throw console.error("Error:",e),e}}},o=class extends e{async chatCompletion(e,r={}){const a={messages:e,id:()=>[...Array(7)].map((()=>"ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789"[Math.floor(36*Math.random())])).join(""),previewToken:null,userId:Math.random().toString(16).substring(2,8)+"-"+Math.random().toString(16).substring(2,4)+"-"+Math.random().toString(16).substring(2,4)+"-"+Math.random().toString(16).substring(2,4)+"-"+Math.random().toString(16).substring(2,12),codeModelMode:r.codeModelMode||!0,agentMode:{},trendingAgentMode:{},isMicMode:!1,isChromeExt:r.isChromeExt||!1,githubToken:null,clickedAnswer2:!1,clickedAnswer3:!1,clickedForceWebSearch:r.webSearch||!1,visitFromDelta:r.visitFromDelta||null};let o;o="undefined"!=typeof window?"https://proxy.zachey.space/?url=http://www.blackbox.ai/api/chat":"https://www.blackbox.ai/api/chat";const s=await fetch(o,{headers:t("https://www.blackbox.ai/api/chat"),body:JSON.stringify(a),method:"POST",mode:"cors",credentials:"omit"});if(!s.ok)throw new Error(`HTTP error! status: ${s.status}`);const n=await s.text();let c=n.lastIndexOf("$");return n.slice(c+1)}},s=class extends e{async chatCompletion(e,a,o){const s=a.use_proxy?"https://proxy.zachey.space/?url=https://chat.eqing.tech/api/openai/v1/chat/completions":"https://origin.eqing.tech/api/openai/v1/chat/completions",n=await fetch(s,{headers:{...t("https://origin.eqing.tech/"),usesearch:[a.webSearch].toString()},body:JSON.stringify({messages:e,stream:a.stream,model:a.model||"gpt-4o-free",temperature:a.temperature||.5,max_tokens:4e3,captchaToken:`P1_${[...Array(30)].map((()=>"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".charAt(Math.floor(64*Math.random())))).join("")}.${[...Array(256)].map((()=>"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".charAt(Math.floor(64*Math.random())))).join("")}.${[...Array(43)].map((()=>"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".charAt(Math.floor(64*Math.random())))).join("")}`}),method:"POST"});if(n.ok)if(a.stream)await r(n,o);else try{const e=await n.json();if(e.choices&&e.choices.length>0&&e.choices[0].message&&e.choices[0].message.content)return e.choices[0].message.content.trim()}catch(e){console.error("Failed to parse JSON:",e)}else console.error("Network response was not ok")}},n=class extends e{async chatCompletion(e){let t=e[0].content;const r=ai.createTextSession(),a=await r;return await a.prompt(t)}},c=class extends e{async chatCompletion(e,a,o){try{const s=await fetch(`${a.ollama_url||"http://localhost:11434"}/api/chat`,{headers:t(`${a.ollama_url||"http://localhost:11434"}`),body:JSON.stringify({messages:e,stream:a.stream||!1,model:a.model}),method:"POST"});if(!s.ok)throw new Error("Network response was not ok");if(!a.stream)return(await s.json()).message.content;await r(s,o)}catch(e){console.error("Error fetching data:",e.message)}}},i=class extends e{async chatCompletion(e,a,o){try{const s=await fetch("https://chat.chatgpt.org.uk/api/openai/v1/chat/completions",{headers:t("https://chat.chatgpt.org.uk/api/openai/v1/chat/completions"),body:JSON.stringify({messages:e,stream:a.stream||!1,model:a.model||"gpt-3.5-turbo",temperature:a.temperature||.5,presence_penalty:a.presence_penalty||0,frequency_penalty:a.frequency_penalty||0,top_p:a.top_p||1}),method:"POST"});if(!0!==a.stream)return(await s.json()).choices[0].message.content;await r(s,o)}catch(e){throw console.error("Error:",e),e}}},h=class extends e{async chatCompletion(e,a){try{const o={"gpt-4o":"gpt-4o-2024-05-13","gpt-4":"gpt-4-32k","gpt-4-turbo":"gpt-4-32k-0613"},s=o[a.model]||o["gpt-4o"],n=await fetch("https://gpt-chatbotru-chat-main.ru/api/openai/v1/chat/completions",{headers:t("https://gpt-chatbotru-chat-main.ru/api/openai/v1/chat/completions"),body:JSON.stringify({messages:e,stream:a.stream||!1,model:s,temperature:a.temperature||.5,presence_penalty:a.presence_penalty||0,frequency_penalty:a.frequency_penalty||0,top_p:a.top_p||1}),method:"POST"});if(!0!==a.stream)return(await n.json()).choices[0].delta.content;r(n).then((e=>e))}catch(e){throw console.error("Error:",e),e}}},p=class{async imageGeneration(e,t){throw new Error("Method 'imageGeneration()' must be implemented.")}},l=class extends p{async imageGeneration(e){try{const t=await fetch("https://nexra.aryahcr.cc/api/image/complements",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({prompt:e,model:"dalle"})});if(!t.ok)throw new Error("Failed to fetch data.");const r=(await t.text()).trim().replace(/^_+/,""),a=JSON.parse(r);if(200===a.code&&a.status)return a.images;throw new Error("Server returned unsuccessful response.")}catch(e){throw console.error("Error fetching data:",e),new Error("Failed to fetch data. Please try again later.")}}},m=class extends p{async imageGeneration(e,t){try{const r=await fetch("https://nexra.aryahcr.cc/api/image/complements",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({prompt:e,model:"stablediffusion-2.1",data:{prompt_negative:t.prompt_negative||"",width:t.width||512,height:t.height||512,sampling_method:t.sampling_method||"default",sampling_steps:t.sampling_steps||1,cfg_scale:t.cfg_scale||1}})});if(!r.ok)throw new Error("Failed to fetch data.");const a=(await r.text()).trim().replace(/^_+/,""),o=JSON.parse(a);if(200===o.code&&o.status)return o.images;throw new Error("Server returned unsuccessful response.")}catch(e){throw console.error("Error fetching data:",e),new Error("Failed to fetch data. Please try again later.")}}};"undefined"!=typeof window&&(window.GPT4js=class{static createProvider(e){switch(e){case"Aryahcr":return new a;case"BlackBox":return new o;case"Nextway":return new s;case"Chrome":return new n;case"Ollama":return new c;case"Alibaba":return new i;case"ChatBotRu":return new h;case"DALLE2":return new l;case"StableDiffusion":return new m;default:throw new Error(`Provider ${e} is not supported.`)}}})})();